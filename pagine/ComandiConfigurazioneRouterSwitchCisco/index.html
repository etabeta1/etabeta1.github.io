<!DOCTYPE html>
<html>
	<head>
		<title>Guida comandi configurazione router e switch Cisco</title>
		<script src="/components/Header.js"></script>
		<link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/comandi.css" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
	</head>
	<body>
		<header-component></header-component>
    <div class="main-body">
      <h2>Configurazione di base per switch e router</h2>
      <p class="comando">
        <h3 class="sezione">Impostare il nome</h3>
        <div class="codice">Switch(config)# hostname [NuovoNome]</div>
        <div class="spiegazione">Il nome non può contenere spazi.</div>
      </p>
      <p class="comando">
        <h3 class="sezione">Configurazione password di una linea</h3>
        <div class="codice">
          Switch(config)# line [Linea] [Numero] <br />
          Switch(config-line)# password [Password] <br />
          Switch(config-line)# login <br />
          Switch(config-line)# end <br />
        </div>
        <div class="spiegazione">La password può contenere spazi all'interno, numeri, lettere e simboli.</div>
      </p>
      <p class="comando">
        <h3 class="sezione">Impostare password di EXEC privilegiato</h3>
        <div class="codice">Switch(config)# enable secret [Password]</div>
        <div class="spiegazione">Per impostare una password criptata, oppure</div>
        <div class="codice">Switch(config)# enable password [Password]</div>
        <div class="spiegazione">per una password non criptata.</div>
      </p>
      <p class="comando">
        <h3 class="sezione">Criptare tutte le password</h3>
        <div class="codice">Switch(config)# service password-encryption</div>
        <div class="spiegazione"></div>
      </p>
      <p class="comando">
        <h3 class="sezione">Mostrare la configurazione</h3>
        <div class="codice">Switch# show [FileDiConfigurazione]</div>
        <div class="spiegazione">I file possono essere <span class="codice">startup-config</span> o <span class="codice">running-config</span>.</div>
      </p>
      <p class="comando">
        <h3 class="sezione">Creazione di un banner</h3>
        <div class="codice">Switch(config)# banner motd "[MessaggioDaMostrare]"</div>
        <div class="spiegazione">Al posto delle virgolette, può essere usato qualsiasi carattere che non compare all'interno del banner.</div>
      </p>
      <p class="comando">
        <h3 class="sezione">Salvataggio della running-config nella startup-config</h3>
        <div class="codice">Switch# copy running-config startup-config</div>
        <div class="spiegazione"></div>
      </p>
      <p class="comando">
        <h3 class="sezione">Abilitare IPv6 su in un router</h3>
        <div class="codice">Router(config)# ipv6 unicast-routing</div>
        <div class="spiegazione"></div>
      </p>
      <p class="comando">
        <h3 class="sezione">Configurazione IPv4 e IPv6 di un'interfaccia o di una vlan</h3>
        <div class="codice">
          Switch(config)# interface [Interfaccia] [Numero] <br />
          Switch(config-if)# ip address [Ip] [SubnetMask] <br />
          Switch(config-if)# ipv6 address [Ip]/[LunghezzaPrefisso] <br />
          Switch(config-if)# ipv6 address [Ip] link-local <br />
          Switch(config-if)# no shutdown <br />
        </div>
        <div class="spiegazione">Per completare la configurazione della vlan, si necessita anche di impostare il default gateway.</div>
        <div class="spiegazione">Se l'interfaccia è seriale e si necessita di impostare il clock</div>
        <div class="codice">Router(config-if)# clock rate [Velocità]</div>
        <div class="spiegazione">ove la velocità è espressa in bit al secondo.</div>
      </p>
      <p class="comando">
        <h3 class="sezione">Impostare il default gateway</h3>
        <div class="codice">Switch(config)# ip default-gateway [Ip]</div>
        <div class="spiegazione"></div>
      </p>
      <hr />
      <h2>Configurazione di base router (si applica in aggiunta alle configurazioni precedenti)</h2>
      <p class="comando">
        <h3 class="sezione">Configurare il router per ricevere connessioni ssh e telnet</h3>
        <div class="codice">
          Router(config)# line vty [Da] [A] <br />
          Router(config-line)# transport input [&lt;ssh&gt; &lt;telnet&gt;] <br />
        </div>
        <div class="spiegazione"></div>
      </p>
      <p class="comando">
        <h3 class="sezione">Aggiungere una descrizione ad un'interfaccia</h3>
        <div class="codice">Router(config-if)# description [Descrizione]</div>
        <div class="spiegazione">La descrizione può essere lunga fino a 240 caratteri.</div>
      </p>
      <p class="comando">
        <h3 class="sezione">Verificare la configurazione delle interfacce, mostrare le interfacce, mostrare le route</h3>
        <div class="codice">
          Router# show ip interface brief <br />
          Router# show ipv6 interface brief <br />
          Router# show ip interfaces <br />
          Router# show ipv6 interfaces <br />
          Router# show ip route <br />
          Router# show ipv6 route <br />
        </div>
        <div class="spiegazione"></div>
      </p>
      <hr />
      <h2>Messa in sicurezza dei dispositivi</h2>
      <p class="comando">
        <h3 class="sezione">Attivare il sistema Cisco Auto Secure</h3>
        <div class="codice">Router# auto secure</div>
        <div class="spiegazione"></div>
      </p>
      <p class="comando">
        <h3 class="sezione">Impostare la lunghezza minima della password</h3>
        <div class="codice">Router(config)# security passwords min-length [LunghezzaMinima]</div>
        <div class="spiegazione">E' consigliabile una lunghezza minima di 10 caratteri.</div>
      </p>
      <p class="comando">
        <h3 class="sezione">Impostare il timeout e numero massimo di tentativi</h3>
        <div class="codice">
          Router(config)# login block-for [TempoDiBloccoInSecondi] attempts [NumeroDiTentativi] within [TempoInSecondi] <br />
          Router(config-line)# exec-timeout [Minuti] [Secondi]
        </div>
        <div class="spiegazione"><span class="codice">exec-timeout</span> manda un <span class="codice">disable</span> dopo il tempo di inattività specificato.</div>
      </p>
      <p class="comando">
        <h3 class="sezione">Configurazione e abilitazione connessioni con SSH</h3>
        <div class="codice">
          Router(config)# ip domain name [NomeDiDominio] <br />
          Router(config)# crypto key generate rsa general-keys modulus [Modulo] <br />
          Router(config)# username [Username] secret [Password] <br />
          Router(config)# line vty [Da] [A] <br />
          Router(config-line)# login local <br />
          Router(config-line)# transport input ssh
        </div>
        <div class="spiegazione">
          Il modulo è la lunghezza della chiave (da 360 a 2048, consigliato 1024). <br />
          Username e Password sono le credenziali dell'utente che si utilizzeranno per connettersi al dispositivo (l'utente appena creato verrà aggiunto al DB locale). <br />
          Si usa <span class="codice">secret</span> per fare in modo che la password sia criptata. <br />
          In <span class="codice">login local</span>, il comando <span class="codice">local</span> indica che l'utente verrà autenticato basandosi sul DB locale. <br />
					Per utilizzare SSH versione 2, bisogna utilizzare
        </div>
				<div class="codice">Router(config)# ip ssh version 2</div>
				<div class="spiegazione">Per impostre un timeout</div>
				<div class="codice">Router(config)# ip ssh timeout [TempoInSecondi]</div>
      </p>
      <p class="comando">
        <h3 class="sezione">Disabilitare servizi inutili e porte aperte inutili</h3>
        <div class="spiegazione">Prima di tutto si visualizzano le porte e i servizi aperti:</div>
        <div class="codice">Router# show ip ports all</div>
        <div class="spiegazione">oppure, con dispositivi più vecchi:</div>
        <div class="codice">Router# show control-plane host open-ports</div>
        <div class="spiegazione">poi, per stoppare il server http:</div>
        <div class="codice">Router(config)# no ip http server</div>
        <div class="spiegazione">e per stoppare il telnet:</div>
        <div class="codice">Router(config-line)# transport input ssh</div>
      </p>
      <hr />
      <h2>Configurazione VLAN</h2>
      <p class="comando">
        <h3 class="sezione">Configurare VLAN sullo switch</h3>
        <div class="spiegazione">Prima di tutto, bisogna creare le VLAN, assegnando a ciascuna di esse un numero ed una descrizione facoltativa</div>
        <div class="codice">
          Switch(config)# vlan [Numero]<br/>
          Switch(config-vlan)# name [Descrizione]
        </div>
        <div class="spiegazione">Successivamente bisonga configurare le varie interfacce in trunk</div>
        <div class="codice">
          Switch(config-if)# switchport access vlan [NumeroVlan]
        </div>
        <div class="spiegazione">
          oppure in trunk
        </div>
        <div class="codice">
          Switch(config-if)# switchport mode trunk<br />
          Switch(config-if)# switchport trunk allowed vlan [&lt;add&gt;/&lt;all&gt;/&lt;except&gt;/&lt;none&gt;/&lt;remove&gt] [NumeroVlanSeRichiesto]
        </div>
      </p>
      <p class="comando">
        <h3 class="sezione">Configurare VLAN sul router</h3>
        <div class="spiegazione">Per ogni VLAN collegata all'interfaccia del router</div>
        <div class="codice">
          Router(config)# interface [Interfaccia].[NumeroSottointerfaccia]<br />
          Router(config-subif)# encapsulation dot1q [NumeroVlan]<br />
          Router(config-subif)# ip address [IndirizzoInterfaccia] [SubnetMask]<br />
          Router(config-subif)# no shutdown
        </div>
        <div class="spiegazione">Infine, per sicurezza, è sempre meglio accendere anche l'interfaccia principale che ha come sottointerfacce le sottointerfacce configurate precedentemente</div>
        <div class="codice">
          Router(config-if)# no shutdown
        </div>
      </p>
      <p class="comando">
        <h3 class="sezione">Mostrare la configurazione attuale delle VLAN</h3>
        <div class="codice">
          Router(config-if)# do show vlan brief<br />
          Router(config)# show vlan brief
        </div>
        <div class="spiegazione">Notare che i due comandi appena elencati fanno esattamente la stessa cosa ma da due modalità di configurazione diverse</div>
      </p>
      <hr />
      <h2>Altre configurazioni</h2>
      <p class="comando">
        <h3 class="sezione">Assegnare le rotte statiche</h3>
        <div class="codice">Router(config)# ip route [ReteDestinazionePacchetto] [SubnetMaskDestinazionePacchetto] [DestinazioneACuiInoltrareIlPacchetto]</div>
        <div class="spiegazione"></div>
      </p>
      <p class="comando">
        <h3 class="sezione">Impostare il DHCP</h3>
        <div class="codice">
					Router(config)# ip dhcp pool [NomePoolDaConfigurare] <br />
					Router(dhcp-config)# network [Rete] [SubnetMask] <br />
					Router(dhcp-config)# default-router [DefaultGateway] <br />
					Router(dhcp-config)# dns-server [ServerDNS] <br />
					Router(dhcp-config)# domain-name [NomeDiDominio] <br />
					Router(dhcp-config)# lease [Giorni] [Ore] [Minuti] <br />
					Router(config)# ip dhcp excluded-address [Da] [A]
				</div>
        <div class="spiegazione">Per impostare un tempo di lease infinito, si può usare</div>
				<div class="codice">Router(dhcp-config)# lease infinite</div>
      </p>
      <p class="comando">
        <h3 class="sezione">Impostare il NAT</h3>
        <div class="spiegazione">Prima di tutto bisogna selezionare l'interfaccia che si vuole configurare</div>
        <div class="codice">Router(config)# interface [Interfaccia]</div>
        <div class="spiegazione">poi, se l'interfaccia è rivolta verso la rete privata,</div>
        <div class="codice">Router(config-if)# ip nat inside</div>
        <div class="spiegazione">altrimenti, se l'interfacci è rivolta verso una rete pubblica,</div>
        <div class="codice">Router(config-if)# ip nat outside</div>
        <div class="spiegazione">Una volta impostato il NAT, potrebbe essere necessario impostare un port forwarding in modo da poter accedere dall'esterno ad un server nella rete privata</div>
        <div class="codice">Router(config)# ip nat inside source static [ProtocolloTrasporto] [IP Interno] [Porta Interna] [IP esterno] [Porta Esterna]</div>
        <div class="spiegazione">il protocollo di trasporto può essere <span class="codice">tcp</span> oppure <span class="codice">udp</span> oppure può essere direttamente omesso.</div>
        <div class="spiegazione">E' inoltre necessario impostare una access list per specificare gli host che useranno NAT</div>
        <div class="codice">
          Router(config)# access-list [NumeroAccessList] permit [IP] [Wildcard] <br />
          Router(config)# ip nat inside source list [NumeroAccessList] interface [Interfaccia Esterna] overload
        </div>
      </p>
      <div class="comando">
        <h3 class="sezione">Impostare il RIP</h3>
        <div class="spiegazione">Per impostare il RIP, è necessario entrare in modalità di configurazione del RIP</div>
        <div class="codice">Router(config)# router rip</div>
        <div class="spiegazione">Eventualmente è possibile attivare il RIPv2 con il seguente comando</div>
        <div class="codice">Router(config-router)# version 2</div>
        <div class="spiegazione">Ora è necessario impostare quali reti si vogliono pubblicizzare</div>
        <div class="codice">Router(config-router)# network [Indirizzo IP]</div>
        <div class="spiegazione">E' anche possibile impostare delle interfacce passive</div>
        <div class="codice">Router(config-router)# passive-interface [Interfaccia]</div>
      </div>
      <div class="comando">
        <h3 class="sezione">Diagnostica del routing</h3>
        <div class="spiegazione">Per attivare il debug del protocollo RIP:</div>
        <div class="codice">Router# debug ip rip</div>
        <div class="spiegazione">Per mostrare tutte le route ottenute con RIP:</div>
        <div class="codice">Router# show ip route rip</div>
        <div class="spiegazione">Per ottenere informazioni sullo stato dei protocolli di routing attivi:</div>
        <div class="codice">Router# show ip protocols</div>
        <div class="spiegazione">Per mostrare tutte le informazioni raccolte da RIP:</div>
        <div class="codice">Router# show ip rip database</div>
      </div>
			<!--
      <p class="comando">
        <h3 class="sezione"></h3>
        <div class="codice"></div>
        <div class="spiegazione"></div>
      </p>
      -->
      <h6>Correzioni o segnalazioni? Questa guida ti è stata utile per qualcosa? <a href="mailto:andrea.oggioni03@gmail.com">Fammelo sapere!</a></h6>
    </div>
	</body>
</html>
